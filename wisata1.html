<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Wisata ‚Äî Carousel, Map & Checklist</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg: #0b0f14;
            --muted: #a0a0a0;
            --accent: #4da3ff;
        }

        body {
            background: linear-gradient(135deg, #1e1e2f, #121212);
            color: white;
            padding-bottom: 60px;
        }


        /* ---------- Carousel ---------- */
        .carousel-container {
            position: relative;
            width: 100%;
            height: 240px;
            overflow: hidden;
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
        }

        .carousel-track {
            display: flex;
            height: 100%;
            transition: transform 600ms cubic-bezier(.22, .9, .35, 1);
            will-change: transform;
        }

        .slide {
            min-width: 100%;
            flex: 0 0 100%;
            height: 100%;
            display: block;
            user-select: none;
            -webkit-user-drag: none;
        }

        .slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .slide-caption {
            position: absolute;
            left: 20px;
            bottom: 18px;
            z-index: 30;
            background: rgba(0, 0, 0, 0.45);
            padding: 8px 12px;
            border-radius: 8px;
            color: #fff;
            font-weight: 700;
            font-size: 14px;
            pointer-events: none;
        }

        .dots {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: 10px;
            display: flex;
            gap: 8px;
            z-index: 40;
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.25);
            cursor: pointer;
            transition: all .18s;
        }

        .dot.active {
            background: var(--accent);
            transform: scale(1.25);
        }

        /* ---------- Map ---------- */
        #map {
            height: 60vh;
            width: 100%;
            display: block;
        }

        .controls {
            position: absolute;
            top: calc(240px + 12px);
            right: 12px;
            z-index: 1000;
            display: flex;
            gap: 8px;
        }

        .btn {
            background: var(--accent);
            color: #000;
            border: none;
            padding: 8px 10px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.45);
        }

        .map-container {
            position: relative;
            width: 100%;
            height: 400px;
            /* sesuaikan tinggi map */
            border-radius: 12px;
            overflow: hidden;
            /* supaya tombol dan map menyatu */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        #map {
            width: 100%;
            height: 100%;
        }

        .map-container {
            position: relative;
            width: 100%;
            height: 400px;
            /* sesuaikan tinggi */
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        #map {
            width: 100%;
            height: 100%;
        }

        .map-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 1000;
        }

        .map-controls .btn {
            background: rgba(0, 0, 0, 0.7);
            color: #00ffc8;
            border: none;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.2s ease, background 0.3s ease;
        }

        .map-controls .btn:hover {
            transform: scale(1.1);
            background: rgba(0, 255, 200, 0.85);
            color: #121212;
        }



        /* Checklist */
        .checklist-container {
            display: flex;
            overflow-x: auto;
            gap: 16px;
            padding: 15px;
            scroll-snap-type: x mandatory;
        }

        .checklist-container::-webkit-scrollbar {
            height: 8px;
        }

        .checklist-container::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 200, 0.4);
            border-radius: 10px;
        }

        .checklist-container::-webkit-scrollbar-track {
            background: transparent;
        }

        /* Card horizontal */
        .checklist-item {
            flex: 0 0 260px;
            display: flex;
            align-items: center;
            background: #1e1e1e;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35);
            scroll-snap-align: start;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .checklist-item:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0, 255, 200, 0.3);
        }

        .checklist-item img {
            width: 90px;
            height: 90px;
            object-fit: cover;
            border-radius: 8px;
            margin-left: 8px;
        }

        .item-info {
            padding: 8px 10px;
            color: white;
            flex: 1;
        }

        .item-info h4 {
            margin: 0;
            font-size: 1rem;
            color: #00ffc8;
        }

        .item-info p {
            font-size: 0.8rem;
            color: #aaa;
            margin: 4px 0;
        }

        .item-info input[type="checkbox"] {
            accent-color: #00ffc8;
            transform: scale(1.2);
            margin-right: 8px;
        }



        /* Footer jarak */
        .distance-footer {
            width: 100%;
            text-align: center;
            padding: 10px;
            background: rgba(0, 0, 0, 0.6);
            color: var(--muted);
            font-weight: 700;
            font-size: 14px;
            position: fixed;
            bottom: 0;
            left: 0;
            z-index: 1000;
            backdrop-filter: blur(4px);
        }

        @media (max-width:780px) {
            .carousel-container {
                height: 200px;
            }

            .controls {
                top: calc(200px + 12px);
            }
        }


        /* Checklist agar mudah di-scroll di HP */
        .checklist-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
            margin-bottom: 100px;
            /* jarak ke footer */
            padding: 0 15px;
        }

        /* Scroll-snap opsional untuk mobile */
        @media (max-width: 768px) {
            .checklist-container {
                display: flex;
                overflow-x: auto;
                scroll-snap-type: x mandatory;
                gap: 10px;
                padding-bottom: 15px;
            }

            .checklist-item {
                flex: 0 0 85%;
                scroll-snap-align: center;
            }
        }

        .place-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(6px);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            color: black;
            transition: transform 0.2s ease;
            cursor: pointer;
        }

        .place-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(8px);
            border-radius: 14px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);
            color: black;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
        }

        .place-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .place-card img {
            width: 100%;
            height: 140px;
            object-fit: cover;
        }

        .place-info {
            padding: 10px;
        }

        .stars {
            color: gold;
            font-size: 14px;
        }

        body {
            background-color: #121212;
            font-family: sans-serif;
        }

        .section-title {
            text-align: center;
            font-size: 1.4rem;
            color: white;
            position: relative;
            margin: 30px 0;
        }

        .section-title::before,
        .section-title::after {
            content: "";
            position: absolute;
            top: 50%;
            width: 30%;
            height: 1px;
            background-color: rgba(255, 255, 255, 0.2);
        }

        .section-title::before {
            left: 0;
        }

        .section-title::after {
            right: 0;
        }

        /* Container horizontal */
        .card-container {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 10px;
            scroll-behavior: smooth;
            margin-top: 10px;
            /* tambah jarak dari judul */
        }

        /* Scrollbar */
        .card-container::-webkit-scrollbar {
            height: 8px;
        }

        .card-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        /* Card tetap sesuai desain lama */
        .section-title {
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #eaeaea;
            text-shadow: 0 0 10px rgba(0, 255, 200, 0.3);
        }

        .card-container {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding-bottom: 10px;
        }

        .card {
            flex: 0 0 auto;
            width: 240px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(8px);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid rgba(0, 255, 200, 0.15);
            text-decoration: none;
            color: inherit;
            transition: transform 0.25s ease, box-shadow 0.25s ease, border 0.25s ease;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.6);
        }

        .card:hover {
            transform: translateY(-6px) scale(1.03);
            box-shadow: 0 8px 20px rgba(0, 255, 200, 0.3);
            border: 1px solid rgba(0, 255, 200, 0.4);
        }

        .card img {
            width: 100%;
            height: 140px;
            object-fit: cover;
        }

        .card-body {
            padding: 14px;
        }

        .card-body h3 {
            font-size: 1rem;
            margin: 0 0 6px;
            color: #fff;
        }

        .card-body p {
            font-size: 0.85rem;
            color: #ccc;
            margin: 3px 0;
        }

        .filter-box {
            margin-bottom: 15px;
            color: #ccc;
            font-size: 0.9rem;
        }

        .filter-box select {
            background: #1e1e1e;
            color: #fff;
            border: 1px solid rgba(0, 255, 200, 0.3);
            padding: 6px 10px;
            border-radius: 8px;
            margin-left: 6px;
            cursor: pointer;
        }

        .filter-box select:focus {
            outline: none;
            border-color: rgba(0, 255, 200, 0.6);
        }


        .back-button {
            position: fixed;
            top: 15px;
            left: 15px;
            width: 42px;
            height: 42px;
            background: rgba(255, 255, 255, 0.12);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1rem;
            cursor: pointer;
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: background 0.2s ease, transform 0.2s ease;
            z-index: 1100;

            /* Animasi awal */
            opacity: 0;
            transform: translateX(-15px);
            animation: slideFadeIn 0.5s ease forwards;
            animation-delay: 0.3s;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.22);
            transform: scale(1.05);
        }

        @keyframes slideFadeIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .comment-item {
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.06);
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 0.95rem;
            line-height: 1.4;
            color: white;
            position: relative;
            flex-direction: column;
        }

        .comment-actions {
            margin-top: 4px;
            display: flex;
            gap: 10px;
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .comment-actions button {
            background: none;
            border: none;
            color: #aaa;
            cursor: pointer;
            transition: color 0.2s;
        }

        .comment-actions button:hover {
            color: var(--accent);
        }

        .comment-reply {
            margin-left: 40px;
            border-left: 2px solid rgba(255, 255, 255, 0.1);
            padding-left: 8px;
            margin-top: 8px;
        }

        /* Container komentar */
        .comment-box {
            max-width: 800px;
            margin: 0 auto 50px;
            padding: 0 15px;
        }

        /* Input komentar */
        .comment-inputs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .comment-inputs input {
            flex: 1;
            padding: 10px 12px;
            border-radius: 12px;
            border: none;
            outline: none;
            background: rgba(255, 255, 255, 0.08);
            color: #fff;
            backdrop-filter: blur(6px);
            font-size: 0.95rem;
        }

        .comment-inputs button {
            padding: 10px 16px;
            border-radius: 12px;
            border: none;
            background: var(--accent);
            color: #000;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .comment-inputs button:hover {
            transform: translateY(-2px);
        }

        /* Komentar utama & reply */
        .comment-item {
            display: flex;
            gap: 12px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(6px);
            padding: 12px 15px;
            border-radius: 14px;
            margin-bottom: 12px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            flex-direction: column;
        }

        .comment-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* Avatar */
        .comment-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: #000;
            flex-shrink: 0;
        }

        /* Konten komentar */
        .comment-content {
            display: flex;
            flex-direction: column;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: #ccc;
            margin-bottom: 4px;
        }

        .comment-text {
            font-size: 0.95rem;
            color: #fff;
            margin-bottom: 6px;
        }

        /* Tombol aksi komentar */
        .comment-actions button {
            background: transparent;
            border: none;
            color: var(--accent);
            font-weight: 600;
            cursor: pointer;
            font-size: 0.85rem;
            margin-right: 8px;
            transition: all 0.2s ease;
        }

        .comment-actions button:hover {
            text-decoration: underline;
        }

        /* Reply dengan indentasi */
        .comment-replies {
            margin-left: 40px;
            margin-top: 8px;
            display: flex;
            flex-direction: column;
        }

        /* Section title stylish */
        .section-title {
            text-align: center;
            font-size: 1.5rem;
            color: #fff;
            margin: 30px 0;
            position: relative;
        }

        .section-title::before,
        .section-title::after {
            content: "";
            position: absolute;
            top: 50%;
            width: 20%;
            height: 1px;
            background-color: rgba(255, 255, 255, 0.2);
        }

        .section-title::before {
            left: 0;
        }

        .section-title::after {
            right: 0;
        }

        /* --- Dasar komentar tetap sama --- */

        /* Responsif untuk tablet */
        @media (max-width: 1024px) {
            .comment-inputs {
                flex-direction: column;
            }

            .comment-inputs input {
                width: 100%;
            }

            .comment-inputs button {
                width: 100%;
                margin-top: 8px;
            }

            .comment-replies {
                margin-left: 30px;
            }
        }

        /* Responsif untuk HP */
        @media (max-width: 768px) {
            .comment-inputs {
                flex-direction: column;
                gap: 8px;
            }

            .comment-inputs input {
                padding: 8px 10px;
                font-size: 0.9rem;
            }

            .comment-inputs button {
                padding: 8px 12px;
                font-size: 0.9rem;
            }

            .comment-item {
                padding: 10px 12px;
            }

            .comment-replies {
                margin-left: 20px;
            }

            .comment-avatar {
                width: 30px;
                height: 30px;
                font-size: 0.85rem;
            }

            .comment-text {
                font-size: 0.9rem;
            }

            .comment-header {
                font-size: 0.8rem;
            }
        }

        .reply-form {
            background: #1e1e1e;
            padding: 10px;
            border-radius: 8px;
            margin-top: 8px;
        }

        .reply-form input,
        .reply-form textarea {
            width: 100%;
            background: #2a2a2a;
            border: 1px solid #444;
            color: white;
            padding: 8px;
            margin-bottom: 8px;
            border-radius: 6px;
        }

        .reply-form input::placeholder,
        .reply-form textarea::placeholder {
            color: #888;
        }

        .reply-form button {
            background: #007acc;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }

        .reply-form button:hover {
            background: #005fa3;
        }

        .wisata-desc {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 14px;
            backdrop-filter: blur(6px);
            text-align: center;
            color: #eee;
            line-height: 1.6;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            animation: fadeIn 1s ease;
        }

        .wisata-desc h2 {
            font-size: 1.6rem;
            margin-bottom: 12px;
            color: #00ffc8;
            text-shadow: 0 0 8px rgba(0, 255, 200, 0.4);
        }

        .wisata-desc p {
            font-size: 1rem;
            color: #ccc;
        }

        /* Animasi masuk */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>

    <!-- Tombol Kembali -->
    <button id="backBtn" class="back-button" title="Kembali">
        <i class="fa-solid fa-arrow-left"></i>
    </button>

    <!-- Carousel -->
    <div class="carousel-container" id="carousel">
        <div class="carousel-track" id="carouselTrack">
            <div class="slide"><img src="iklan 2.jpg" alt="Monas 1"></div>
            <div class="slide"><img src="iklan 3.jpg" alt="Monas 2"></div>
            <div class="slide"><img src="images (1).jpeg" alt="Monas 3"></div>
        </div>
        <div class="slide-caption">Monumen Nasional (Monas) ‚Äî Jakarta</div>
        <div class="dots" id="dots"></div>
    </div>

    <section class="wisata-desc">
        <h2>üó∫Ô∏è Tentang Wisata Ini</h2>
        <p>
            Monas didirikan untuk mengenang perlawanan dan perjuangan rakyat Indonesia dalam merebut kemerdekaan yang
            berada di area Jakarta Pusat. Keindahan Monas terletak pada puncaknya,
            di mana terdapat lidah api berlapis emas yang melambangkan semangat perjuangan bangsa Indonesia.
        </p>
    </section>

    <!-- Map -->
    <div class="map-container">
        <div id="map"></div>

        <!-- Tombol ditempelkan ke dalam map -->
        <div class="map-controls">
            <button class="btn" id="focusBtn"><i class="fa-solid fa-location-crosshairs"></i></button>
            <button class="btn" id="navBtn"><i class="fa-solid fa-map-location-dot"></i></button>
        </div>
    </div>


    <!-- Checklist Barang -->
    <h2 class="section-title">üìù Checklist Perjalanan</h2>

    <div class="checklist-container">
        <div class="checklist-item">
            <img src="iklan 2.jpg" alt="Kamera">
            <div class="item-info">
                <h4>üì∑ Kamera</h4>
                <p>Untuk mengabadikan momen liburanmu.</p>
                <label>
                    <input type="checkbox"> Bawa
                </label>
            </div>
        </div>

        <div class="checklist-item">
            <img src="https://source.unsplash.com/200x200/?water-bottle" alt="Air Minum">
            <div class="item-info">
                <h4>üíß Air Minum</h4>
                <p>Agar tetap segar dan terhidrasi.</p>
                <label>
                    <input type="checkbox"> Bawa
                </label>
            </div>
        </div>

        <div class="checklist-item">
            <img src="https://source.unsplash.com/200x200/?medicine" alt="Obat">
            <div class="item-info">
                <h4>üíä Obat-obatan</h4>
                <p>Penting untuk kesehatan selama perjalanan.</p>
                <label>
                    <input type="checkbox"> Bawa
                </label>
            </div>
        </div>

        <div class="checklist-item">
            <img src="https://source.unsplash.com/200x200/?powerbank" alt="Powerbank">
            <div class="item-info">
                <h4>üîã Powerbank</h4>
                <p>Agar gadget tetap menyala di mana saja.</p>
                <label>
                    <input type="checkbox"> Bawa
                </label>
            </div>
        </div>
    </div>



    <section class="resto-section">
        <h2 class="section-title">üçΩÔ∏è Restoran & üè® Penginapan Terdekat</h2>

        <!-- Filter -->
        <div class="filter-box">
            <label for="sort">Urutkan:</label>
            <select id="sort">
                <option value="distance">üìè Jarak Terdekat</option>
                <option value="rating">‚≠ê Rating Tertinggi</option>
            </select>
        </div>

        <div class="card-container" id="restoList"></div>
    </section>

    <!-- Komentar -->
    <section id="comment-section" style="margin-top:40px;padding:15px;">
        <h2 class="section-title">üí¨ Komentar</h2>
        <div class="comment-box">
            <div class="comment-inputs">
                <input type="text" id="usernameInput" placeholder="Nama kamu">
                <input type="text" id="commentInput" placeholder="Tulis komentar...">
                <button id="sendComment">Kirim</button>
            </div>
            <div id="commentList"></div>
        </div>

        <!-- Footer Info -->
        <footer id="distance-footer" style="
    position: fixed;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(30, 30, 30, 0.6);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    color: white;
    text-align: center;
    padding: 12px 18px;
    font-size: 0.9rem;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    z-index: 1000;
    min-width: 260px;
">
            üìç Menghitung jarak & waktu tempuh...
        </footer>


        <!-- Leaflet JS -->
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

        <script>
            /* Carousel */
            (function () {
                const container = document.getElementById('carousel');
                const track = document.getElementById('carouselTrack');
                const slides = Array.from(track.children);
                const dotsWrap = document.getElementById('dots');
                let current = 0, timer = null;
                const slideCount = slides.length, intervalMs = 3000;

                slides.forEach((_, i) => {
                    const d = document.createElement('button');
                    d.className = 'dot' + (i === 0 ? ' active' : '');
                    d.addEventListener('click', () => { goTo(i); resetTimer(); });
                    dotsWrap.appendChild(d);
                });

                function updateDots() {
                    Array.from(dotsWrap.children).forEach((d, i) => d.classList.toggle('active', i === current));
                }
                function goTo(index) {
                    current = (index + slideCount) % slideCount;
                    track.style.transition = 'transform 600ms cubic-bezier(.22,.9,.35,1)';
                    track.style.transform = `translateX(-${current * 100}%)`;
                    updateDots();
                }
                function next() { goTo(current + 1); }
                function startTimer() { stopTimer(); timer = setInterval(next, intervalMs); }
                function stopTimer() { if (timer) clearInterval(timer); }
                function resetTimer() { startTimer(); }

                container.addEventListener('mouseenter', stopTimer);
                container.addEventListener('mouseleave', startTimer);

                let startX = 0, dx = 0, isDragging = false;
                container.addEventListener('touchstart', (e) => {
                    stopTimer(); isDragging = true;
                    startX = e.touches[0].clientX;
                    track.style.transition = 'none';
                }, { passive: true });
                container.addEventListener('touchmove', (e) => {
                    if (!isDragging) return;
                    dx = e.touches[0].clientX - startX;
                    const base = -current * container.clientWidth;
                    track.style.transform = `translateX(${base + dx}px)`;
                }, { passive: true });
                container.addEventListener('touchend', () => {
                    isDragging = false;
                    const threshold = container.clientWidth * 0.12;
                    if (Math.abs(dx) > threshold) {
                        if (dx < 0) goTo(current + 1); else goTo(current - 1);
                    } else goTo(current);
                    dx = 0; startTimer();
                });

                window.addEventListener('resize', () => goTo(current));
                goTo(0); startTimer();
            })();
            /* Map & Distance */
            (function () {
                const wisata = { name: 'Monumen Nasional (Monas)', lat: -6.175392, lng: 106.827153 };
                const map = L.map('map').setView([wisata.lat, wisata.lng], 15);

                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '&copy; OpenStreetMap contributors'
                }).addTo(map);

                const wisataMarker = L.marker([wisata.lat, wisata.lng]).addTo(map)
                    .bindPopup(`<b>${wisata.name}</b><br>Klik peta atau tombol "Buka Maps" untuk membuka Google Maps.`);

                document.getElementById('focusBtn').addEventListener('click', () => {
                    map.setView([wisata.lat, wisata.lng], 16);
                    wisataMarker.openPopup();
                });

                document.getElementById('navBtn').addEventListener('click', () => {
                    window.open(`https://www.google.com/maps/dir/?api=1&destination=${wisata.lat},${wisata.lng}&travelmode=driving`, '_blank');
                });

                function formatWaktu(jam) {
                    if (jam < 24) return `${jam.toFixed(1)} jam`;
                    const hari = Math.floor(jam / 24);
                    const sisaJam = Math.round(jam % 24);
                    return sisaJam === 0 ? `${hari} hari` : `${hari} hari ${sisaJam} jam`;
                }

                function showDistance(userLat, userLng) {
                    if (window._userMarker) map.removeLayer(window._userMarker);
                    if (window._routeLine) map.removeLayer(window._routeLine);

                    window._userMarker = L.marker([userLat, userLng]).addTo(map).bindPopup('Lokasi Anda');
                    window._routeLine = L.polyline([[userLat, userLng], [wisata.lat, wisata.lng]], { color: '#f1c40f', weight: 3 }).addTo(map);

                    const km = map.distance([userLat, userLng], [wisata.lat, wisata.lng]) / 450;

                    // Estimasi waktu tempuh
                    const waktuJalan = km / 7;   // km/jam
                    const waktuMotor = km / 61;  // km/jam
                    const waktuMobil = km / 60;  // km/jam

                    document.getElementById('distance-footer').innerHTML = `
            <b>${wisata.name}</b><br>
            üõ£Ô∏è ${km.toFixed(2)} km &nbsp; | &nbsp;
            üö∂ ${formatWaktu(waktuJalan)} &nbsp; | &nbsp;
            üõµ ${formatWaktu(waktuMotor)} &nbsp; | &nbsp;
            üöó ${formatWaktu(waktuMobil)}
        `;

                    map.fitBounds(L.latLngBounds([[userLat, userLng], [wisata.lat, wisata.lng]]).pad(0.2));
                }

                function mintaLokasi() {
                    if (!navigator.geolocation) {
                        document.getElementById('distance-footer').innerHTML = "‚ö†Ô∏è Perangkat tidak mendukung GPS";
                        return;
                    }

                    navigator.geolocation.getCurrentPosition(
                        (pos) => {
                            const lat = pos.coords.latitude;
                            const lng = pos.coords.longitude;
                            showDistance(lat, lng);
                        },
                        (err) => {
                            let pesan = "‚ö†Ô∏è Gagal mendapatkan lokasi";
                            if (err.code === 1) {
                                pesan = "üö´ Izin lokasi ditolak. Aktifkan GPS untuk melihat jarak.";
                            } else if (err.code === 2) {
                                pesan = "‚ùå Lokasi tidak tersedia. Coba lagi.";
                            } else if (err.code === 3) {
                                pesan = "‚åõ Permintaan lokasi timeout. Periksa koneksi.";
                            }
                            document.getElementById('distance-footer').innerHTML = pesan;
                        },
                        { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
                    );
                }

                // Jalankan saat halaman dibuka
                mintaLokasi();

            })();

            const wisata = { lat: -7.2458, lng: 112.7378 };

            // Data tempat
            let places = [
                { name: "Warung Sate Pak Budi", lat: -7.250445, lng: 112.768845, rating: 4.5, img: "https://picsum.photos/400/250?random=1" },
                { name: "Bakso Solo Mantap", lat: -7.257472, lng: 112.752088, rating: 4.2, img: "https://picsum.photos/400/250?random=2" },
                { name: "Kopi Santai", lat: -7.258234, lng: 112.754423, rating: 4.7, img: "https://picsum.photos/400/250?random=3" },
                { name: "Hotel Nyaman", lat: -7.260900, lng: 112.750321, rating: 4.8, img: "https://picsum.photos/400/250?random=4" }
            ];

            // Fungsi hitung jarak
            function getDistance(lat1, lon1, lat2, lon2) {
                const R = 6371;
                const dLat = (lat2 - lat1) * Math.PI / 180;
                const dLon = (lon2 - lon1) * Math.PI / 180;
                const a =
                    Math.sin(dLat / 2) ** 2 +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                    Math.sin(dLon / 2) ** 2;
                return (R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))).toFixed(1);
            }

            // Bintang rating
            function getStars(rating) {
                let stars = "";
                for (let i = 1; i <= 5; i++) {
                    if (rating >= i) stars += "‚≠ê";
                    else if (rating >= i - 0.5) stars += "‚ú®";
                    else stars += "‚òÜ";
                }
                return stars;
            }

            // Render card
            function renderList(sortBy = "distance") {
                const restoList = document.getElementById("restoList");
                restoList.innerHTML = "";

                // Hitung jarak
                places.forEach(p => {
                    p.distance = getDistance(wisata.lat, wisata.lng, p.lat, p.lng);
                });

                // Urutkan
                if (sortBy === "rating") {
                    places.sort((a, b) => b.rating - a.rating);
                } else {
                    places.sort((a, b) => a.distance - b.distance);
                }

                // Tampilkan
                places.forEach(p => {
                    restoList.innerHTML += `
                        <a href="https://www.google.com/maps?q=${p.lat},${p.lng}" target="_blank" class="card">
        <img src="${p.img}" alt="${p.name}">
        <div class="card-body">
        <h3>${p.name}</h3>
        <p>${getStars(p.rating)} ‚Ä¢ ${p.rating}</p>
        <p>üìè ${p.distance} km dari wisata</p>
        </div>
    </a>
    `;
                });
            }

            // Event filter
            document.getElementById("sort").addEventListener("change", e => {
                renderList(e.target.value);
            });

            // Load awal
            renderList();

            document.getElementById('backBtn').addEventListener('click', () => {
                window.location.href = 'index.html'; // ganti dengan link tujuan kamu
            });


            // Fungsi format timestamp
            function formatTimestamp(date) {
                return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()} ${date.getHours()}:${date.getMinutes().toString().padStart(2, '0')}`;
            }

            let replyTargetIndex = null; // index komentar yang sedang di-reply

            // Muat komentar
            function loadComments() {
                const saved = JSON.parse(localStorage.getItem("comments") || "[]");
                const commentList = document.getElementById("commentList");
                commentList.innerHTML = "";

                saved.forEach((c, index) => {
                    const div = document.createElement("div");
                    div.className = "comment-item";
                    div.innerHTML = `
                <div class="comment-avatar">${c.username.charAt(0).toUpperCase()}</div>
                <div class="comment-content">
                    <div class="comment-header">
                        <span>${c.username}</span>
                        <span>${c.time}</span>
                    </div>
                    <div class="comment-text">${c.text}</div>
                    <div class="comment-actions">
                        <button class="reply-btn" data-index="${index}">Balas</button>
                        <button class="delete-btn" data-index="${index}">Hapus</button>
                    </div>
                    <div class="comment-replies"></div>
                </div>
            `;
                    commentList.appendChild(div);

                    // Tampilkan balasan
                    if (c.replies) {
                        const repliesContainer = div.querySelector(".comment-replies");
                        c.replies.forEach(reply => {
                            const r = document.createElement("div");
                            r.className = "comment-item comment-reply";
                            r.innerHTML = `
                        <div class="comment-avatar">${reply.username.charAt(0).toUpperCase()}</div>
                        <div class="comment-content">
                            <div class="comment-header">
                                <span>${reply.username}</span>
                                <span>${reply.time}</span>
                            </div>
                            <div class="comment-text">${reply.text}</div>
                        </div>
                    `;
                            repliesContainer.appendChild(r);
                        });
                    }
                });

                // Event hapus komentar
                document.querySelectorAll(".delete-btn").forEach(btn => {
                    btn.addEventListener("click", (e) => {
                        const idx = e.target.dataset.index;
                        const saved = JSON.parse(localStorage.getItem("comments") || "[]");
                        saved.splice(idx, 1);
                        localStorage.setItem("comments", JSON.stringify(saved));
                        loadComments();
                    });
                });

                // Event reply komentar
                document.querySelectorAll(".reply-btn").forEach(btn => {
                    btn.addEventListener("click", (e) => {
                        replyTargetIndex = e.target.dataset.index;
                        document.getElementById("commentInput").placeholder = "Balas komentar...";
                        document.getElementById("sendComment").textContent = "Balas";
                        document.getElementById("commentInput").focus();
                    });
                });
            }

            // Kirim komentar baru atau balasan
            document.getElementById("sendComment").addEventListener("click", () => {
                const inputText = document.getElementById("commentInput");
                const usernameInput = document.getElementById("usernameInput");
                const text = inputText.value.trim();
                const username = usernameInput.value.trim() || "Anonim";

                if (text) {
                    const saved = JSON.parse(localStorage.getItem("comments") || "[]");

                    if (replyTargetIndex !== null) {
                        // Balasan
                        if (!saved[replyTargetIndex].replies) saved[replyTargetIndex].replies = [];
                        saved[replyTargetIndex].replies.push({
                            username: username,
                            text: text,
                            time: formatTimestamp(new Date())
                        });
                        replyTargetIndex = null; // reset mode reply
                        document.getElementById("commentInput").placeholder = "Tulis komentar...";
                        document.getElementById("sendComment").textContent = "Kirim";
                    } else {
                        // Komentar baru
                        saved.push({
                            username: username,
                            text: text,
                            time: formatTimestamp(new Date()),
                            replies: []
                        });
                    }

                    localStorage.setItem("comments", JSON.stringify(saved));
                    inputText.value = "";
                    loadComments();
                }
            });

            // Load komentar saat halaman dibuka
            loadComments();
        </script>
</body>

</html>